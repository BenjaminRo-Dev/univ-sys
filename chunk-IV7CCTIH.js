import{a as R,b as X,c as _,d as M}from"./chunk-ARCGAOER.js";import{a as L}from"./chunk-7D3A2SKW.js";import{B as A,E as y,F as E,G as n,H as r,I as u,K as C,N as a,O as h,P as O,Q as S,T as p,V as D,Z as I,aa as k,ba as U,ca as b,da as j,ea as N,j as x,m as c,n as d,w as l}from"./chunk-3TBGQWL2.js";var F=(()=>{let e=class e{constructor(){this.http=c(I),this.apiUrl=L.apiBaseUrl}getHorarioById(o){return this.http.get(`${this.apiUrl}asistencia/docente/${o}`)}storeAsistencia(o){return this.http.post(`${this.apiUrl}asistencia/store`,o)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var $=(()=>{let e=class e{constructor(){this.notificationService=c(R),this.router=c(b),this.asistenciaService=c(F),this.hayError=!1,this.usuarioLocal={},this.asistencia={}}ngOnInit(){let o=localStorage.getItem("user");o?this.usuarioLocal=JSON.parse(o):(localStorage.removeItem("user"),this.router.navigate(["/login"]))}guardarAsistencia(){this.asistencia={userId:this.usuarioLocal.id,estado:"Presente"},this.asistenciaService.storeAsistencia(this.asistencia).subscribe({next:t=>{this.notificationService.changeMessage("Asistencia registrada"),console.log(t)},error:t=>{this.notificationService.changeMessage("No tiene clases en este momento")}})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-asistencia-guardar"]],standalone:!0,features:[p],decls:3,vars:0,consts:[[1,"container","text-center"],[1,"btn","btn-primary",3,"click"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"button",1),C("click",function(){return s.guardarAsistencia()}),a(2," Marcar asistencia "),r()())}});let i=e;return i})();var H=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-inicio"]],standalone:!0,features:[p],decls:7,vars:0,consts:[[1,"container","p-5"],[1,"card","p-5"],[1,"card-body","row","justify-content-md-center"],["src","assets/uagrm.png","alt","UnivSys",1,"col-md-2","col-sm-2","rounded","mx-auto","d-block"],[1,"text-center"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),u(3,"img",3),n(4,"p",4),a(5,"Panel docente"),r(),u(6,"app-asistencia-guardar"),r()()())},dependencies:[$]});let i=e;return i})();var V=i=>["/docente/asistencia/",i],z=i=>["/perfil/",i],B=(()=>{let e=class e{constructor(){this.user={}}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user"))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-docente-navbar"]],standalone:!0,features:[p],decls:17,vars:6,consts:[[1,"navbar","navbar-expand-lg","bg-primary-subtle"],[1,"container"],["routerLink","inicio","routerLinkActive","activado",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","horario","routerLinkActive","activado",1,"nav-link"],["routerLinkActive","activado",1,"nav-link",3,"routerLink"],[1,"text-end"],[1,"btn","btn-info","m-1",3,"routerLink"]],template:function(t,s){t&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),a(3,"UnivSys"),r(),n(4,"button",3),u(5,"span",4),r(),n(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),a(10,"Horario"),r()(),n(11,"li",7)(12,"a",9),a(13,"Asistencia"),r()()(),n(14,"div",10)(15,"button",11),a(16," Perfil "),r()()()()()),t&2&&(l(12),A("routerLink",D(2,V,s.user.id)),l(3),A("routerLink",D(4,z,s.user.id)))},dependencies:[j,N],styles:[".activado[_ngcontent-%COMP%]{color:red}"]});let i=e;return i})();var J=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-docente-layout"]],standalone:!0,features:[p],decls:4,vars:0,consts:[[1,"container","py-5"]],template:function(t,s){t&1&&(u(0,"app-docente-navbar")(1,"app-notification"),n(2,"div",0),u(3,"router-outlet"),r())},dependencies:[U,B,X]});let i=e;return i})();var P=(()=>{let e=class e{constructor(){this.http=c(I),this.apiUrl=L.apiBaseUrl}getHorarioById(o){return this.http.get(`${this.apiUrl}horario/${o}`)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var K=(i,e)=>e.id;function Q(i,e){if(i&1&&(n(0,"tr")(1,"td"),a(2),r(),n(3,"td"),a(4),r(),n(5,"td"),a(6),r(),n(7,"td"),a(8),r(),n(9,"td"),a(10),r()()),i&2){let m=e.$implicit;l(2),h(m.dia),l(2),S(" ",m.grupo.nombre," - ",m.grupo.materia.name," "),l(2),S("",m.aula.modulo.numero," - ",m.aula.numero,""),l(2),O("",m.inicio," "),l(2),h(m.fin)}}var q=(()=>{let e=class e{constructor(){this.cronogramaService=c(P),this.route=c(k),this.router=c(b),this.horarios=[],this.usuarioLocal={},this.fileName="MiHorario.xlsx"}ngOnInit(){let o=localStorage.getItem("user");o?(this.usuarioLocal=JSON.parse(o),this.cronogramaService.getHorarioById(parseInt(this.usuarioLocal.id)).subscribe(t=>{this.horarios=this.combineConsecutiveHorarios(t.horarios)})):(localStorage.removeItem("user"),this.router.navigate(["/login"]))}combineConsecutiveHorarios(o){if(!o.length)return[];o.sort((s,f)=>{let v=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],T=v.indexOf(s.dia)-v.indexOf(f.dia);if(T!==0)return T;let w=s.aula.id-f.aula.id;return w!==0?w:s.inicio.localeCompare(f.inicio)});let t=[o[0]];for(let s=1;s<o.length;s++){let f=t[t.length-1],v=o[s];f.dia===v.dia&&f.aula.id===v.aula.id&&f.fin===v.inicio?f.fin=v.fin:t.push(v)}return t}exportarExcel(){let o=document.getElementById("tabla-cronograma"),t=M.table_to_sheet(o),s=M.book_new();M.book_append_sheet(s,t,"Horarios"),_(s,this.fileName)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-horario"]],standalone:!0,features:[p],decls:27,vars:0,consts:[[1,"container","p-5"],[1,"card","p-5"],[1,"card-body","row","justify-content-md-center"],[1,"text-end"],[1,"m-2","btn","btn-secondary",3,"click"],["src","assets/uagrm.png","alt","UnivSys",1,"col-md-2","col-sm-4","rounded","mx-auto","d-block"],[1,"text-center"],[1,"table-responsive"],["id","tabla-cronograma",1,"table","table-hover","table-striped"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),C("click",function(){return s.exportarExcel()}),a(5," Descargar Excel "),r()(),u(6,"img",5),n(7,"h1",6),a(8,"Mi cronograma"),r(),u(9,"p",6),n(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th"),a(15,"Dia"),r(),n(16,"th"),a(17,"Materia"),r(),n(18,"th"),a(19,"Aula"),r(),n(20,"th"),a(21,"Horario"),r(),n(22,"th"),a(23,"Salida"),r()()(),n(24,"tbody"),y(25,Q,11,7,"tr",null,K),r()()()()()()),t&2&&(l(25),E(s.horarios))}});let i=e;return i})();var W=(i,e)=>e.id;function Y(i,e){if(i&1&&(n(0,"tr")(1,"td"),a(2),r(),n(3,"td"),a(4),r(),n(5,"td"),a(6),r(),n(7,"td"),a(8),r()()),i&2){let m=e.$implicit;l(2),h(m.fecha),l(2),h(m.horario.inicio),l(2),S("",m.horario.grupo.nombre," - ",m.horario.grupo.materia.name,""),l(2),h(m.estado)}}var G=(()=>{let e=class e{constructor(){this.asistenciaService=c(F),this.route=c(k),this.router=c(b),this.asistencias=[]}ngOnInit(){let o=this.route.snapshot.paramMap.get("userId")??"";this.asistenciaService.getHorarioById(parseInt(o)).subscribe(t=>{this.asistencias=t.data,console.log(this.asistencias)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-asistencia"]],standalone:!0,features:[p],decls:21,vars:0,consts:[[1,"card","p-3"],[1,"text-end"],["routerLink","create",1,"btn","btn-primary"],[1,"card-body","table-responsive"],[1,"table","table-hover"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"h2"),a(2,"Registro de asistencia"),r(),n(3,"div",1)(4,"button",2),a(5," Crear "),r()(),n(6,"div",3)(7,"table",4)(8,"thead")(9,"tr")(10,"th"),a(11,"Fecha"),r(),n(12,"th"),a(13,"Horario"),r(),n(14,"th"),a(15,"Aula"),r(),n(16,"th"),a(17,"Estado"),r()()(),n(18,"tbody"),y(19,Y,9,5,"tr",null,W),r()()()()),t&2&&(l(19),E(s.asistencias))}});let i=e;return i})();var Re=[{path:"",component:J,children:[{path:"",component:H},{path:"inicio",component:H},{path:"horario",component:q},{path:"asistencia/:userId",component:G}]}];export{Re as DOCENTE_ROUTES};
